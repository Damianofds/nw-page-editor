#!/bin/bash

files=();

n="1";
while [ $n -le $# ]; do
  if [ ! -e "${!n}" ]; then
    echo "${0##*/}: warning: skipping non-existing file: ${!n}" 1>&2;
  else
    files+=( $(realpath -s "${!n}") );
  fi
  n=$((n+1));
done

NW="nw";
[ $( uname | grep -ci darwin ) != 0 ] &&
  NW="/Applications/nwjs.app/Contents/MacOS/nwjs";

if [ "${nw_page_editor:-}" = "" ]; then
  $NW /opt/nw-page-editor "${files[@]}";
else
  $NW "$nw_page_editor" "${files[@]}";
fi
